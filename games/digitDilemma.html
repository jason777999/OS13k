<body style=user-select:none><script>
b=document.body
let e,f,t,l,g,c,h=[0,0,0,0],s=[],u=[],a=0,d=0;setInterval(()=>{if(!e){for(l=++d<11?4+d:15,e=d,o=0;o<1;){for(o=1e5,t=[],v=0;v<l;++v)for(M=0;M<l;++M)s[l*v+M]=M%(l-1)&&v%(l-1)?0:-1,u[l*v+M]=[0,0];for(i=0;++i<l-8;)s[l*R(l)+R(l)]=-1;for(i=0;--o&&i<e;)if(M=R(l),v=R(l),!(s[l*v+M]>8||s[l*v+M]<0||i&&!s[l*v+M]&&R(1e3)||(j=R(2)?0:2*R(2)-1,k=j?0:2*R(2)-1,r=l*v+M,q=l*v+M-l*j-k,s[l*v+M+l*j+k]))){for(;R(10)&&0==s[l*v+M+l*j+k+l*j+k];v+=j,M+=k);f=s.slice(),i||(g=M+k+k,c=v+j+j),C(M+k+k,v+j+j)&&(s[q]>0&&s[q]!=s[r]?(s[l*v+M+l*j+k]=s[r],s[r]=0):!R(5)&&i?(s[l*v+M+l*j+k]=s[r],s[r]=-1):(s[l*v+M+l*j+k]=++s[r],i++),g=M+k+k,c=v+j+j)}}for(f=s.slice();!C(M=R(l),v=R(l));f=s.slice());g=M,c=v}for(v=(M=h[2]-h[i=0])?0:h[3]-h[1],h[32]&&t.length&&(s=t[t.length-1][i++],u=t[t.length-1][i++],g=t[t.length-1][i++],c=t[t.length-1][i++],e=t[t.length-1][i++],t=t.slice(0,-1)),s[l*v+M+l*c+g]?s[l*v+M+l*c+g]>0&&(t[t.length]=[s.slice(),u.slice(),g,c,e],u[l*v+M+l*c+g]=[v,M]):(s[l*c+g]=0,s[l*(c+=v)+(g+=M)]=-2),++a,v=0;v<l;++v)for(M=0;M<l;++M)u[l*v+M][0]|u[l*v+M][1]&&M%(l-1)&&v%(l-1)&&!((M+v+a/4)%2)&&(n=s[l*v+M+l*u[l*v+M][0]+u[l*v+M][1]],n==s[l*v+M]?(--e,s[l*v+M+l*u[l*v+M][0]+u[l*v+M][1]]=n-1,s[l*v+M]=0):n<1&&(s[l*v+M+l*u[l*v+M][0]+u[l*v+M][1]]=s[l*v+M],u[l*v+M+l*u[l*v+M][0]+u[l*v+M][1]]=n<0?[0,0]:u[l*v+M],s[l*v+M]=0),u[l*v+M]=[0,0]);for(i='<pre><big><big><big><big><b><center>',v=0;v<l;++v)for(M=0;M<l;++M)i+=s[l*v+M]<=0?'.#â˜»'[-s[l*v+M]]:s[l*v+M],M==l-1&&(i+='<br>');b.innerHTML=i+d,h=[0,0,0,0]},16),C=(i,n)=>f[l*n+i]?0:i==g&&n==c?1:(f[l*n+i]=1)&C(i+1,n)|C(i-1,n)|C(i,n-1)|C(i,n+1),b.onkeydown=i=>h[i.keyCode%37]=1,R=i=>Math.floor(1e6*Math.random())%i
</script>