<style>body{background:#111;color:#fff;user-select:none;text-align:center}</style>
Volume <input type=range id=V onchange=s()>&nbsp;&nbsp;<br><br>
Speech <input type=checkbox id=S onchange=s()>&nbsp;&nbsp;
System Sounds <input type=checkbox id=N onchange=s()>&nbsp;&nbsp;
Popups <input type=checkbox id=P onchange=s()>
<br><br>Background
<input id=C type=color oninput=s()>&nbsp;&nbsp;
<input id=D type=color oninput=s()>&nbsp;&nbsp;
<input id=T oninput=s()>
<br><br>Filters
<span id=F>
<script>

// filters
f=
[
    ['Default',  ''],
    ['Gray',     'grayscale('],
    ['Game Boy', 'sepia()hue-rotate(40deg)contrast(.8'],
    ['Ocean',    'invert()sepia()invert('],
    ['Sepia',    'sepia('],
    ['Fruity',   'saturate(9',]
];

// load settings
O = parent.OS13k;                  // get OS13k
i = O.Settings();                  // get settings
V.value   = i[0] * 100;            // volume
S.checked = i[1];                  // speech
P.checked = i[2];                  // popups
N.checked = i[3];                  // system sounds
C.value   = i[4];                  // color 1
D.value   = i[5];                  // color 2
T.value   = i[6];                  // background text
t = f.findIndex(e=>e[1]==i[7]);    // find filter
t = t < 0 ? 0 : t;                 // filter

// rebuild and save settings
s=e=>
{
    // add buttons for filters
    F.innerHTML = '';                        // clear old buttons
    f.map((i,j)=>                            // iterate through filters
    {
        F.innerHTML +=                       // add to html
        `<button style='border:5px solid #${ // create button
            j == t ? 'f00' : '111'           // selected color
            }' onmousedown="s(O.Speak('${    // mouse down
            i[0]                             // speak name
            }'),t=${ j                       // save filter
            })">` + i[0];                    // set button name
    });

    // save settings
    O.SaveSettings
    (
        V.value / 100, // volume
        S.checked,     // speech
        P.checked,     // popups
        N.checked,     // popups
        D.value,       // color 1
        C.value,       // color 2
        T.value,       // background text
        f[t][1]        // filter
    );
}

// build settings
s();

</script>