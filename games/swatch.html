<body style=margin:0>
<div id=a><svg id="b" viewBox="0 0 6 6" height=320 width=320></svg></div>
<style>rect{cursor:pointer;transition: x .15s ease-out, y .25s ease-out;}</style>
<script>let[D,R,M,L,V,W,I]=[document,"rect","map",0,0,0,0],RGB=["e81cf2013d24e98a6c4fe0613ace249f","512fffcaff227728e908ea975ee38a65","40337fe5b7a00c583f68809e0dd36865"];sas=(e,o)=>{for(O in o)e.setAttribute(O,o[O])},isSorted=a=>a.every((c,i,a)=>!i||a[i-1].i<=c.i),blerp=(x,y,Q,R,S,T)=>(1-y)*((1-x)*Q+x*R)+y*((1-x)*S+x*T),si=(a,b)=>[a.i,b.i]=[b.i,a.i],shuffle=q=>(q.sort(a=>Math.random()-.5),q[M]((k,i)=>k.f&&si(q[k.i],q[i])),q),hexdec=n=>n.match(/\w{2}/g)[M](m=>parseInt(m,16)),getLevel=n=>RGB[M](_=>hexdec(_.slice(2*n,2*n+8))),setTitle=a=>D.title=`Lvl:${L} Moves:${V++}`,level=N=>{let rgb=getLevel(N),x=i=>i%6,y=i=>~~(i/6),swap=[],cells=[...Array(36)][M]((d,i)=>{let f=[0,5,30,35].includes(i),p=x(i)/5,q=y(i)/5,c=`rgb(${rgb[M](c=>blerp(p,q,...c))})`;return{i:i,p:p,q:q,c:c,f:f}});handleClick=c=>{console.log(c),!c.f&&I&&2==swap.push(c)&&(si(...swap),swap=[],draw())},init=A=>{b.innerHTML="",V=0,A[M](c=>{let r=D.createElementNS("http://www.w3.org/2000/svg",R);sas(r,{height:1,width:1,x:x(c.i),y:y(c.i),fill:c.c}),r.onclick=e=>handleClick(c),b.appendChild(r)}),setTimeout(()=>{shuffle(cells),draw(),I=1},2e3)},draw=a=>(setTitle(),cells[M]((c,i)=>sas(D.querySelectorAll(R)[i],{x:x(c.i),y:y(c.i)}))),init(cells)},level(L);</script>