<body style=margin:0><svg id=G viewBox="0 0 6 6" height=320 width=320></svg><div id=H></div>
<style>rect[f=false]{cursor:pointer;transition:x .15s,y .25s;}</style>
<script>let[D,R,M,C,L,V,W,I,P,RGB,Z]=[document,"rect","map",[...Array(36)].map(e=>({})),0,0,0,0,[],["e81cf2013d24e98a6c4fe0613ace249f","512fffcaff227728e908ea975ee38a65","40337fe5b7a00c583f68809e0dd36865"],[.1,.5,200,.12,.01,.09,4,6,-52.5]];zzfx=()=>{},X=e=>e%6,Y=e=>e/6|0,SA=(e,i)=>{for(o in i)e.setAttribute(o,i[o])},IS=e=>e.every((e,i,f)=>!i||f[i-1].i<=e.i),BL=(e,i,f,t,r,c)=>(1-i)*((1-e)*f+e*t)+i*((1-e)*r+e*c),SI=(e,i)=>[e.i,i.i]=[i.i,e.i],SH=e=>(b=C.filter(e=>!e.f)[M](e=>e.i).sort(e=>Math.random()-.5),C[M](e=>e.f||(e.i=b.pop()))),HD=e=>e.match(/\w{2}/g)[M](e=>parseInt(e,16)),GL=e=>RGB[M](i=>HD(i.slice(2*e,2*e+8))),ST=e=>H.innerHTML=`Lvl:${L+1} Moves:${V++}`,LV=e=>{let i=GL(e);C[M]((e,f)=>(e.i=f,e.f=[0,5,30,35].includes(f),e.c=`rgb(${i[M](e=>BL(X(f)/5,Y(f)/5,...e))})`)),IN(C)},DR=e=>(ST(),C[M]((e,i)=>SA(D.querySelectorAll(R)[i],{i:e.i,x:X(e.i),y:Y(e.i)}))),IN=e=>{P=[],G.innerHTML="",V=0,e[M](e=>{let i=D.createElementNS("http://www.w3.org/2000/svg",R);SA(i,{height:1,width:1,x:X(e.i),y:Y(e.i),fill:e.c,f:e.f}),i.onclick=i=>EH(e),G.appendChild(i)}),setTimeout(e=>{SH(C),DR(),I=1},2e3)},EH=e=>{if(e.f||!I)return zzfx();zzfx(Z),2==P.push(e)&&(SI(...P),P=[],DR(),zzfx(...Z)),IS(C)&&LV(++L)},LV(L);</script>
